import{m as b,a as n,j as t,L as y}from"./app-CG0T4jI9.js";import{A as N}from"./AuthenticatedLayout-C1rc0jPu.js";import"./transition-9IhsO5Ub.js";function $({initialRoutes:d,departurePoints:o,arrivalPoints:c,flash:a}){const{post:u,delete:h}=b(),[i,x]=n.useState(""),[s,f]=n.useState(""),[l,g]=n.useState(""),[m,p]=n.useState(d);n.useEffect(()=>{v()},[i,s,l]);const v=()=>{const e=d.filter(r=>(!i||r.departure_point===i)&&(!s||r.arrival_point===s)&&(!l||r.departure_date===l));p(e)},j=e=>{u(route("tickets.store",{route_id:e}))},w=e=>{h(route("routes.destroy",{id:e}),{preserveScroll:!0,onSuccess:()=>{p(m.filter(r=>r.id!==e))}})};return t.jsxs(N,{header:t.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Расписание"}),children:[t.jsx(y,{title:"Расписание"}),a.error&&t.jsx("div",{className:"fixed top-4 right-4 bg-red-500 text-white p-4 rounded-md",children:a.error}),a.success&&t.jsx("div",{className:"fixed top-4 right-4 bg-green-500 text-white p-4 rounded-md",children:a.success}),t.jsx("div",{className:"py-12",children:t.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:t.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:t.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[t.jsxs("div",{className:"mb-4 flex justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mt-2 text-md font-medium tracking-tight text-gray-950 max-lg:text-center",children:"Точка отправления"}),t.jsxs("select",{value:i,onChange:e=>x(e.target.value),className:"flex items-center rounded-md bg-white pl-3 outline-1 -outline-offset-1 outline-gray-300 has-[input:focus-within]:outline-2 has-[input:focus-within]:-outline-offset-2 has-[input:focus-within]:outline-indigo-600",children:[t.jsx("option",{value:"",children:"Выберите точку отправления"}),o.map(e=>t.jsx("option",{value:e,disabled:e===s,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"mt-2 text-md font-medium tracking-tight text-gray-950 max-lg:text-center",children:"Точка прибытия"}),t.jsxs("select",{value:s,onChange:e=>f(e.target.value),className:"flex items-center rounded-md bg-white pl-3 outline-1 -outline-offset-1 outline-gray-300 has-[input:focus-within]:outline-2 has-[input:focus-within]:-outline-offset-2 has-[input:focus-within]:outline-indigo-600",children:[t.jsx("option",{value:"",children:"Выберите точку прибытия"}),c.map(e=>t.jsx("option",{value:e,disabled:e===i,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"mt-2 text-md font-medium tracking-tight text-gray-950 max-lg:text-center",children:"Дата отправления"}),t.jsx("input",{type:"date",value:l,onChange:e=>g(e.target.value),className:"flex items-center rounded-md bg-white pl-3 outline-1 -outline-offset-1 outline-gray-300 has-[input:focus-within]:outline-2 has-[input:focus-within]:-outline-offset-2 has-[input:focus-within]:outline-indigo-600"})]})]}),m.length>0?m.map(e=>t.jsxs("div",{className:"mb-4 p-4 border rounded",children:[t.jsxs("div",{children:["Точка отправления: ",e.departure_point]}),t.jsxs("div",{children:["Точка прибытия: ",e.arrival_point]}),t.jsxs("div",{children:["Цена: ",e.cost," руб."]}),t.jsxs("div",{children:["Дата и время отправления: ",e.departure_date," ",e.departure_time]}),t.jsxs("div",{children:["Дата и время прибытия: ",e.arrival_date," ",e.arrival_time]}),t.jsxs("div",{children:["Время в пути: ",_(e.departure_date,e.departure_time,e.arrival_date,e.arrival_time)]}),t.jsxs("div",{className:"w-full flex justify-around",children:[t.jsx("button",{onClick:()=>j(e.id),className:"px-4 py-2 bg-green-500 text-white mr-2 rounded-md w-1/3",children:"Заказать билет"}),t.jsx("button",{onClick:()=>w(e.id),className:"px-4 py-2 bg-red-500 text-white rounded-md w-1/3",children:"Удалить маршрут"})]})]},e.id)):t.jsx("div",{children:"Маршруты не найдены"})]})})})})]})}function _(d,o,c,a){const u=new Date(`${d}T${o}`),h=new Date(`${c}T${a}`),i=Math.abs(h-u),x=Math.floor(i/36e5),s=Math.floor(i%36e5/6e4);return`${x} ч ${s} мин`}export{$ as default};
